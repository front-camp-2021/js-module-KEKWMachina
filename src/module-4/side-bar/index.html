<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css">
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <header class="header">
    <div class="header__logo"></div>
    <div class="header__text">Online Store</div>
  </header>

  <div class="breadcrumbs">
    <div class="breadcrumbs__home-button"></div>
    <div class="breadcrumbs__arrows"></div>
    <div class="breadcrumbs__active-page">eCommerce</div>
    <div class="breadcrumbs__arrows"></div>
    <div class="breadcrumbs__page">Electronics</div>
  </div>

  <div class="main-content-nav">
    <div class="filters-header">
      <div class="filters-header__nav">
        <div class="filters-header__marker">Filters</div>
        <button class="filters-header__filters-hide-button"></button>
      </div>
    </div>
    <div class="search-resluts">
      <div class="search-resluts__number">7588 Results Found</div>
      <button class="search-resluts__wishlist-button"></button>
    </div>
  </div>

  <div class="main-content">
    <div class="filters">


    </div>
    <div class="cards">
      <div class="searchfield">
        <input class="searchfield__input" placeholder="Search">
      </div>
    </div>
  </div>

  <script type="module">
    import FiltersList from '/filtersList.js';
    import Card from '/card.js';
    import { products } from '/products.js';
    import CardsList from '/cardList.js';
    import DoubleSlider from '/DoubleSlider.js';
    import SideBar from '/sideBar.js'
    import { categoryFilterConfig, brandFilterConfig } from '/config.js';


    const sideBarContainer = document.querySelector('.filters');
    const sideBar = new SideBar({
      categoriesFilter: categoryFilterConfig,
      brandFilter: brandFilterConfig,
      priceSliderData: { min: 25, max: 325, filterName: 'Price' },
      ratingSliderData: { min: 0, max: 5, filterName: 'Rating' },
    });

    sideBarContainer.append(sideBar.element);

    sideBar.dispatchResetFilters()
    const resetButton = sideBar.element.querySelector('.filters__filters-reset-button');

    resetButton.addEventListener('clear-filters', () => {
      console.log(1);
    })





    /*const sliderContainer = document.querySelector('.filters__slider');
    const priceSlider = new DoubleSlider({ min: 23, max: 64, filterName: 'Price' });
    const ratingSlider = new DoubleSlider({ min: 0, max: 5, filterName: 'Rating' });

    sliderContainer.append(priceSlider.element);
    sliderContainer.append(ratingSlider.element);

    priceSlider.rangeSelector();
    ratingSlider.rangeSelector()

    const list = [
      {
        value: 'cell_phones',
        title: 'Cell phones',
      },
      {
        value: 'laptops',
        title: 'Computers & Tables',
      },
      {
        value: 'PCs',
        title: 'Personal Computers',
      }
    ];

    const filtersList = new FiltersList({
      title: 'Category',
      list
    });

    const filtersContainer = document.querySelector('.filters__main');
    const resetButton = document.querySelector('.filters__filters-reset-button');
    filtersContainer.append(filtersList.element);

    const cardListContainer = document.querySelector('.cards');
    const cardsList = new CardsList({
      data: products,
      Component: Card
    });

    cardListContainer.append(cardsList.element);

    resetButton.addEventListener('pointerdown', () => {
      filtersList.reset();
      cardsList.update([]);
    });

    const CardFilters = new Set();

    filtersList.element.addEventListener('change', event => {
      if (event.target.checked) {
        CardFilters.add(event.target.id);
      } else {
        CardFilters.delete(event.target.id);
      }

      function filterProducts(productsArr = [], CardFilters = []) {
        const result = [];

        for (const filter of CardFilters) {
          for(const product of productsArr) {
            if (Array.from(Object.values(product)).includes(filter)) {
              result.push(product);
            }
          }
        }

        return result;
      }

      const filteredProducts = filterProducts(products, CardFilters);
      cardsList.update(filteredProducts);
    });*/

  </script>
</body>

</html>